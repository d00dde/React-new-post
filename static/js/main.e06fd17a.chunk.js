(window["webpackJsonpReact-new-post"]=window["webpackJsonpReact-new-post"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=n(8),s=n(39),u=(n(49),n(50),n(37)),l=n.n(u),p=function(){return r.a.createElement("nav",{className:"header"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("img",{className:"logo",src:l.a,alt:"logo"}),r.a.createElement("div",{className:"title"},"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0439 \u043d\u043e\u0432\u043e\u0439 \u043f\u043e\u0447\u0442\u044b")))},h=n(5),d=n(10),f=n(12),m=n(11),g=n(13),y=(n(51),r.a.createContext()),v=y.Provider,E=y.Consumer,b=function(){return function(e){return function(t){return r.a.createElement(E,null,function(n){return r.a.createElement(e,Object.assign({},t,{newPostService:n}))})}}},w=(n(52),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}),O=function(e){return function(t,n){return function(){n({type:"FETCH_".concat(e,"_REQUEST")}),t.apply(void 0,arguments).then(function(t){n({type:"FETCH_".concat(e,"_SUCCESS"),payload:t})}).catch(function(t){n({type:"FETCH_".concat(e,"_FAILURE"),payload:t})})}}},C=O("CITIES"),j=O("CITY"),S=O("WAREHOUSES"),k=function(){return{type:"CLEAR_WAREHOUSE"}},P=n(24),_=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={filter:[],value:""},n.inputCityName=function(e){var t=e.target.value,a=t.toLowerCase().trim(),r=[],c=n.props.cities;if(""!==a){for(var i=0;i<c.length&&(c[i].toLowerCase().startsWith(a)&&r.push(c[i]),!(r.length>5));i++);if(r.length<=5)for(var o=0;o<c.length&&(c[o].toLowerCase().match(a)&&(r.includes(c[o])||r.push(c[o])),!(r.length>5));o++);}n.setState({filter:r,value:t})},n.isSubmit=function(e){"Enter"===e.key&&""!==n.state.value&&n.props.cities.includes(n.state.value)&&n.cityChoosed(n.state.value)},n.cityChoosed=function(e){var t;t=e.target?e.target.firstChild.data:e,n.setState({filter:[],value:t}),n.props.fetchCity(t),n.props.clearWarehouse()},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCities()}},{key:"render",value:function(){var e=this,t=this.state.filter.map(function(t){return r.a.createElement("li",{key:t,onClick:function(t){return e.cityChoosed(t)}},t)});return r.a.createElement("div",{className:"search-city"},r.a.createElement(P.TextInput,{className:"city-input",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",onChange:this.inputCityName,value:this.state.value,onKeyPress:this.isSubmit},r.a.createElement("ul",{className:"hint"},t)))}}]),t}(a.Component),I=w(b(),Object(o.b)(function(e){return{cities:e.citiesInput.cities,city:e.citiesInput.city}},function(e,t){return{fetchCities:C(t.newPostService.getCities,e),fetchCity:j(t.newPostService.getCity,e),clearWarehouse:k}}))(_),N=function(){return r.a.createElement("div",{className:"spinner"},"...Loading")},T=(n(35),function(e){var t,n;return n=t=function(t){function n(){var e,t;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=Object(f.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(c))))._paginationClass="pagination",t._activeClass="active",t._availableClass="waves-effect",t._dasabledClass="disabled",t.state={activePage:0},t.createPagination=function(){var e=t.state.activePage,n=t.props,a=n.paginationCount,c=n.paginationScale,i=n.data,o=Math.ceil(i.length/a);if(o<=1)return null;for(var s=[],u=t.drawPages(o,e,c),l=u.begin;l<u.end;l++){var p=l===e?t._activeClass:t._availableClass;s.push(r.a.createElement("li",{key:l,className:p,onClick:function(e){return t.onClickHandler(e)}},r.a.createElement("a",{number:l},l+1)))}var h=0===e?t._dasabledClass:t._availableClass,d=e===o-1?t._dasabledClass:t._availableClass;return r.a.createElement("ul",{className:t._paginationClass},r.a.createElement("li",{className:h,onClick:function(e){return t.onClickHandler(e)}},r.a.createElement("a",{number:"-1"},"<")),s,r.a.createElement("li",{className:d,onClick:function(e){return t.onClickHandler(e)}},r.a.createElement("a",{number:"+1"},">")))},t.onClickHandler=function(e){e.target.parentElement.classList.contains(t._dasabledClass)||e.target.parentElement.classList.contains(t._activeClass)||t.onPageChecked(e.target.getAttribute("number"))},t.onPageChecked=function(e){var n;switch(e){case"-1":n=t.state.activePage-1;break;case"+1":n=t.state.activePage+1;break;default:n=+e}t.setState({activePage:n})},t.getPage=function(e,t,n){return e.slice(t*n,t*(n+1))},t.drawPages=function(e,t,n){return e>2*n+1?t-n<0?{begin:0,end:2*n+1}:t+n>=e?{begin:e-(2*n+1),end:e}:{begin:t-n,end:t+n+1}:{begin:0,end:e}},t}return Object(g.a)(n,t),Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({activePage:0})}},{key:"render",value:function(){var t=this.getPage(this.props.data,this.props.paginationCount,this.state.activePage);return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,Object.assign({},this.props,{data:t})),this.createPagination())}}]),n}(a.Component),t.defaultProps={paginationCount:10,paginationScale:2},n}(function(e){var t=e.data,n=e.cityName,a=e.onClickItem,c=e.onCheckType,i=t.map(function(e){var t=e.SiteKey,n=e.ShortAddressRu,c=e.Number;return r.a.createElement("a",{className:"collection-item",key:t,onClick:function(){return a(t)}},"\u2116",c," ",n)});return 0===t.length&&(i=r.a.createElement("h3",null,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.")),r.a.createElement("div",{className:"warehouse-list"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"city-name"},n),r.a.createElement(P.Checkbox,{value:"Red",label:"\u0422\u043e\u043b\u044c\u043a\u043e \u0433\u0440\u0443\u0437\u043e\u0432\u044b\u0435",onChange:function(e){return c(e.target.checked)}})),r.a.createElement("div",{className:"collection"},i))})),A=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={cargoOnly:!1},n.chooseWarehouse=function(e){var t=n.props.warehouses.find(function(t){return t.SiteKey===e});n.props.warehouseChoosed(t)},n.checkType=function(e){n.setState({cargoOnly:e})},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.city.data){var t=e.city.data?e.city.data[0].Description:"",n=this.props.city.data[0].Description;t!==n&&(this.props.fetchWarehouses(n),this.checkType(!1))}}},{key:"render",value:function(){if(!this.props.city.data)return null;if(this.props.loading)return r.a.createElement(N,null);var e=this.props.warehouses;return this.state.cargoOnly&&(e=this.props.warehouses.filter(function(e){return+e.PlaceMaxWeightAllowed>900})),r.a.createElement(T,{data:e,cityName:this.props.city.data[0].Description,onClickItem:this.chooseWarehouse,onCheckType:this.checkType})}}]),t}(a.Component),R=w(b(),Object(o.b)(function(e){return{warehouses:e.warehouses.warehouses,city:e.citiesInput.city,loading:e.warehouses.loading,warehouse:e.warehouses.warehouse}},function(e,t){return{fetchWarehouses:S(t.newPostService.getWarehouses,e),warehouseChoosed:function(t){return e(function(e){return{type:"WAREHOUSE_CHOOSED",payload:e}}(t))}}}))(A),H=function e(){var t=this;Object(h.a)(this,e),this._map=null,this._marker=null,this.setCenter=function(e){e&&(t._map=new window.google.maps.Map(document.getElementById("map"),{zoom:16,center:e}),t._marker&&t._marker.setMap(null),t._marker=new window.google.maps.Marker({position:e,map:t._map}))},this._map=new window.google.maps.Map(document.getElementById("map"),{zoom:17,center:{lat:50.354786,lng:30.542884}})},D=(n(97),function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.gmap=new H}},{key:"componentDidUpdate",value:function(){this.gmap.setCenter(this.getCenter(this.props.warehouse))}},{key:"render",value:function(){return r.a.createElement("div",{id:"map"})}},{key:"getCenter",value:function(e){return!!e.SiteKey&&{lat:+e.Latitude,lng:+e.Longitude}}}]),t}(a.Component)),U=Object(o.b)(function(e){return{warehouse:e.warehouses.warehouse}})(D),W=(n(98),Object(o.b)(function(e){return{warehouse:e.warehouses.warehouse}})(function(e){if(!e.warehouse.SiteKey)return null;var t=e.warehouse,n=t.Number,a=t.ShortAddressRu,c=t.Schedule,i=t.InternationalShipping,o=t.PlaceMaxWeightAllowed;return r.a.createElement("div",{className:"details"},r.a.createElement("h5",null,"\u041e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u2116 ",n),r.a.createElement("div",null,"\u0410\u0434\u0440\u0435\u0441\u0441: ",a),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col l3"},"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b:"),r.a.createElement("ul",{className:"col l9"},r.a.createElement("li",null,"\u041f\u041d: ",c.Monday),r.a.createElement("li",null,"\u0412\u0422: ",c.Tuesday),r.a.createElement("li",null,"\u0421\u0420: ",c.Wednesday),r.a.createElement("li",null,"\u0427\u0422: ",c.Thursday),r.a.createElement("li",null,"\u041f\u0422: ",c.Friday),r.a.createElement("li",null,"\u0421\u0411: ",c.Saturday),r.a.createElement("li",null,"\u0412\u0421: ",c.Sunday))),r.a.createElement("div",null,"\u041c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u043e\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",1===i?"\u0434\u0430":"\u043d\u0435\u0442"),r.a.createElement("div",null,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f: ",o," \u043a\u0433."))})),x=(n(99),Object(o.b)(function(e){return{error:e.error}})(function(e){return console.error(e.error),r.a.createElement("div",{className:"error-indicator"},e.error.message)})),F=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0}),console.log("An error has occurred",e),console.log("In component",t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(x,null):this.props.children}}]),t}(a.Component),L=n(4),M=n.n(L),K=n(17),B=n(14);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach(function(t){Object(K.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J=n(23);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(K.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q=function(e,t){if(void 0===e)return{cities:[],loading:!1,error:!1,city:{}};switch(t.type){case"FETCH_CITIES_REQUEST":return G({},e.citiesInput,{loading:!0});case"FETCH_CITIES_SUCCESS":return G({},e.citiesInput,{loading:!1,cities:t.payload});case"FETCH_CITIES_FAILURE":return G({},e.citiesInput,{loading:!1,cities:[],error:t.payload});case"FETCH_CITY_REQUEST":return G({},e.citiesInput,{loading:!0});case"FETCH_CITY_SUCCESS":return G({},e.citiesInput,{city:t.payload});case"FETCH_CITY_FAILURE":return G({},e.citiesInput,{loading:!1,city:{},error:t.payload});default:return e.citiesInput}};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){Object(K.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=function(e,t){if(void 0===e)return{warehouses:[],loading:!1,error:!1,warehouse:{}};switch(t.type){case"FETCH_WAREHOUSES_REQUEST":return X({},e.warehouses,{loading:!0});case"FETCH_WAREHOUSES_SUCCESS":return X({},e.warehouses,{loading:!1,warehouses:t.payload.data});case"FETCH_WAREHOUSES_FAILURE":return X({},e.warehouses,{loading:!1,warehouses:[],error:t.payload});case"WAREHOUSE_CHOOSED":return X({},e.warehouses,{warehouse:t.payload});case"CLEAR_WAREHOUSE":return X({},e,{warehouse:{}});default:return e.warehouses}},$=function(e,t){return{citiesInput:q(e,t),warehouses:Z(e,t)}},ee=Object(J.b)($),te=new function e(){var t=this;Object(h.a)(this,e),this.APIKey="c0ce9a8981a02dab73883469619c32a1",this.urlBase="https://api.novaposhta.ua/v2.0/json/",this.getResource=function(){var e=Object(B.a)(M.a.mark(function e(n){var a,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(Y({},n,{apiKey:t.APIKey})),e.next=3,fetch(t.urlBase,{method:"POST",body:a,headers:{"content-type":"application/json"}});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Could not fetch, received ".concat(r.status));case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getDistricts=Object(B.a)(M.a.mark(function e(){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"Address",calledMethod:"getAreas"});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)})),this.getCities=Object(B.a)(M.a.mark(function e(){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"Address",calledMethod:"getCities"});case 2:return n=e.sent,e.abrupt("return",n.data.map(function(e){return e.Description}));case 4:case"end":return e.stop()}},e)})),this.getCity=function(){var e=Object(B.a)(M.a.mark(function e(n){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"AddressGeneral",calledMethod:"getCities",methodProperties:{FindByString:n}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getWarehouses=function(){var e=Object(B.a)(M.a.mark(function e(n){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"AddressGeneral",calledMethod:"getWarehouses",methodProperties:{Language:"ru",CityName:n}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};i.a.render(r.a.createElement(o.a,{store:ee},r.a.createElement(F,null,r.a.createElement(v,{value:te},r.a.createElement(s.a,null,r.a.createElement(function(){return r.a.createElement("div",{className:"container app row"},r.a.createElement(p,null),r.a.createElement("div",{className:"col m12 l6 left-column"},r.a.createElement(I,null),r.a.createElement(R,null)),r.a.createElement("div",{className:"col m12 l6 right-column"},r.a.createElement(U,null),r.a.createElement(W,null)))},null))))),document.getElementById("root"))},35:function(e,t,n){},37:function(e,t,n){e.exports=n.p+"static/media/logo.1cf18ac9.jpg"},40:function(e,t,n){e.exports=n(102)},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[40,1,2]]]);
//# sourceMappingURL=main.e06fd17a.chunk.js.map