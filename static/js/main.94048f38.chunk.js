(window["webpackJsonpReact-new-post"]=window["webpackJsonpReact-new-post"]||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(18),o=r.n(c),i=r(11),s=r(39),u=(r(49),r(37)),l=r.n(u),p=function(){return a.a.createElement("nav",{className:"header"},a.a.createElement("div",{className:"nav-wrapper"},a.a.createElement("img",{className:"logo",src:l.a,alt:"logo"}),a.a.createElement("div",{className:"title"},"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0439 \u043d\u043e\u0432\u043e\u0439 \u043f\u043e\u0447\u0442\u044b")))},h=r(5),f=r(9),d=r(12),m=r(10),E=r(13),y=(r(50),a.a.createContext()),g=y.Provider,v=y.Consumer,b=function(){return function(e){return function(t){return a.a.createElement(v,null,function(r){return a.a.createElement(e,Object.assign({},t,{newPostService:r}))})}}},w=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},O=function(e){return{type:"FETCH_CITY_SUCCESS",payload:e}},C=function(e,t){return function(r){t({type:"FETCH_CITIES_REQUEST"}),e(r).then(function(e){Array.isArray(e)?t({type:"FETCH_CITIES_SUCCESS",payload:e}):t(O(e))}).catch(function(e){t(function(e){return{type:"FETCH_CITIES_FAILURE",payload:e}}(e))})}},S=function(e,t){return function(r){t({type:"FETCH_WAREHOUSES_REQUEST"}),e.getWarehouses(r).then(function(e){t({type:"FETCH_WAREHOUSES_SUCCESS",payload:e})}).catch(function(e){t(function(e){return{type:"FETCH_WAREHOUSES_FAILURE",payload:e}}(e))})}},j=function(){return{type:"CLEAR_WAREHOUSE"}},P=r(27),k=function(e){function t(){var e,r;Object(h.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={filter:[],value:""},r.inputCityName=function(e){var t=e.target.value,n=t.toLowerCase().trim(),a=[],c=r.props.cities;if(""!==n){for(var o=0;o<c.length&&(c[o].toLowerCase().startsWith(n)&&a.push(c[o]),!(a.length>5));o++);if(a.length<=5)for(var i=0;i<c.length&&(c[i].toLowerCase().match(n)&&(a.includes(c[i])||a.push(c[i])),!(a.length>5));i++);}r.setState({filter:a,value:t})},r.isSubmit=function(e){"Enter"===e.key&&""!==r.state.value&&r.props.cities.includes(r.state.value)&&r.cityChoosed(r.state.value)},r.cityChoosed=function(e){var t;t=e.target?e.target.firstChild.data:e,r.setState({filter:[],value:t}),r.props.fetchCity(t),r.props.clearWarehouse()},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCities()}},{key:"render",value:function(){var e=this,t=this.state.filter.map(function(t){return a.a.createElement("li",{key:t,onClick:function(t){return e.cityChoosed(t)}},t)});return a.a.createElement("div",{className:"search-city"},a.a.createElement(P.TextInput,{className:"city-input",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",onChange:this.inputCityName,value:this.state.value,onKeyPress:this.isSubmit},a.a.createElement("ul",{className:"hint"},t)))}}]),t}(n.Component),_=w(b(),Object(i.b)(function(e){return{cities:e.citiesInput.cities,city:e.citiesInput.city}},function(e,t){return{fetchCities:C(t.newPostService.getCities,e),fetchCity:C(t.newPostService.getCity,e),clearWarehouse:j}}))(k),A=function(){return a.a.createElement("div",{className:"spinner"},"...Loading")},I=(r(95),function(e){function t(){var e,r;Object(h.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).onClickHandler=function(e){e.target.parentElement.classList.contains("disabled")||e.target.parentElement.classList.contains("active")||r.props.onPageChecked(e.target.getAttribute("number"))},r.drawPages=function(e,t,r){return e>2*r+1?t-r<0?{begin:0,end:2*r+1}:t+r>=e?{begin:e-(2*r+1),end:e}:{begin:t-r,end:t+r+1}:{begin:0,end:e}},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.totalPages,n=t.activePage;if(1===r)return null;for(var c=[],o=this.drawPages(r,n,3),i=o.begin;i<o.end;i++){var s=i===n?"active":"waves-effect";c.push(a.a.createElement("li",{key:i,className:s,onClick:function(t){return e.onClickHandler(t)}},a.a.createElement("a",{href:"#",number:i},i+1)))}var u=0===n?"disabled":"waves-effect",l=n===r-1?"disabled":"waves-effect";return a.a.createElement("ul",{className:"pagination"},a.a.createElement("li",{className:u,onClick:function(t){return e.onClickHandler(t)}},a.a.createElement("a",{href:"#",number:"-1"},"<")),c,a.a.createElement("li",{className:l,onClick:function(t){return e.onClickHandler(t)}},a.a.createElement("a",{href:"#",number:"+1"},">")))}}]),t}(n.Component)),N=(r(96),function(e){function t(){var e,r;Object(h.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={count:10,activePage:0},r.chooseWarehouse=function(e){var t=r.props.warehouses.find(function(t){return t.SiteKey===e});r.props.warehouseChoosed(t)},r.getPage=function(e,t,r){return e.slice(t*r,t*(r+1))},r.onPageChecked=function(e){var t;switch(e){case"-1":t=r.state.activePage-1;break;case"+1":t=r.state.activePage+1;break;default:t=+e}r.setState({activePage:t})},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.city.data){var t=e.city.data?e.city.data[0].Description:"",r=this.props.city.data[0].Description;t!==r&&(this.props.fetchWarehouses(r),this.setState({activePage:0}))}}},{key:"render",value:function(){var e=this;if(!this.props.city.data)return null;if(this.props.loading)return a.a.createElement(A,null);var t=this.getPage(this.props.warehouses,this.state.count,this.state.activePage),r=Math.ceil(this.props.warehouses.length/this.state.count),n=t.map(function(t){var r=t.SiteKey,n=t.ShortAddressRu,c=t.Number;return a.a.createElement("a",{className:"collection-item",href:"#",key:r,onClick:function(){return e.chooseWarehouse(r)}},"\u2116",c," ",n)});return a.a.createElement("div",{className:"warehouse-list"},a.a.createElement("h4",null,this.props.city.data[0].DescriptionRu),a.a.createElement("div",{className:"collection"},n),a.a.createElement(I,{totalPages:r,activePage:this.state.activePage,onPageChecked:this.onPageChecked}))}}]),t}(n.Component)),R=w(b(),Object(i.b)(function(e){return{warehouses:e.warehouses.warehouses,city:e.citiesInput.city,loading:e.warehouses.loading,warehouse:e.warehouses.warehouse}},function(e,t){return{fetchWarehouses:S(t.newPostService,e),warehouseChoosed:function(t){return e(function(e){return{type:"WAREHOUSE_CHOOSED",payload:e}}(t))}}}))(N),H=function e(){var t=this;Object(h.a)(this,e),this._map=null,this._marker=null,this.setCenter=function(e){t._map=new window.google.maps.Map(document.getElementById("map"),{zoom:16,center:e}),t._marker&&t._marker.setMap(null),t._marker=new window.google.maps.Marker({position:e,map:t._map})},this._map=new window.google.maps.Map(document.getElementById("map"),{zoom:17,center:{lat:50.354786,lng:30.542884}})},T=(r(97),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.gmap=new H}},{key:"render",value:function(){return this.props.center&&this.gmap.setCenter(this.props.center),a.a.createElement("div",{id:"map"})}}]),t}(n.Component)),U=(r(98),function(e){if(!e.warehouse.SiteKey)return null;var t=e.warehouse,r=t.Number,n=t.ShortAddressRu,c=t.Schedule,o=t.InternationalShipping,i=t.PlaceMaxWeightAllowed;return a.a.createElement("div",{className:"details"},a.a.createElement("h5",null,"\u041e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u2116 ",r),a.a.createElement("div",null,"\u0410\u0434\u0440\u0435\u0441\u0441: ",n),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col l3"},"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b:"),a.a.createElement("ul",{className:"col l9"},a.a.createElement("li",null,"\u041f\u041d: ",c.Monday),a.a.createElement("li",null,"\u0412\u0422: ",c.Tuesday),a.a.createElement("li",null,"\u0421\u0420: ",c.Wednesday),a.a.createElement("li",null,"\u0427\u0422: ",c.Thursday),a.a.createElement("li",null,"\u041f\u0422: ",c.Friday),a.a.createElement("li",null,"\u0421\u0411: ",c.Saturday),a.a.createElement("li",null,"\u0412\u0421: ",c.Sunday))),a.a.createElement("div",null,"\u041c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u043e\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",1===o?"\u0434\u0430":"\u043d\u0435\u0442"),a.a.createElement("div",null,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f: ",i," \u043a\u0433."))}),D=(r(35),Object(i.b)(function(e){return{warehouse:e.warehouses.warehouse}})(function(e){var t;return t=!!e.warehouse.SiteKey&&{lat:+e.warehouse.Latitude,lng:+e.warehouse.Longitude},a.a.createElement("div",{className:"container row"},a.a.createElement(p,null),a.a.createElement("div",{className:"col s6 left-column"},a.a.createElement(_,null),a.a.createElement(R,null)),a.a.createElement("div",{className:"col s6 right-column"},a.a.createElement(T,{center:t}),a.a.createElement(U,{warehouse:e.warehouse})))})),W=(r(99),Object(i.b)(function(e){return{error:e.error}})(function(e){return console.error(e.error),a.a.createElement("div",{className:"error-indicator"},e.error.message)})),F=function(e){function t(){var e,r;Object(h.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0}),console.log("An error has occurred",e),console.log("In component",t)}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(W,null):this.props.children}}]),t}(n.Component),x=r(4),L=r.n(x),M=r(17),K=r(14);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(r,!0).forEach(function(t){Object(M.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var J=r(23);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){Object(M.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Y=function(e,t){if(void 0===e)return{cities:[],loading:!1,error:!1,city:{}};switch(t.type){case"FETCH_CITIES_REQUEST":return G({},e.citiesInput,{loading:!0});case"FETCH_CITIES_SUCCESS":return G({},e.citiesInput,{loading:!1,cities:t.payload});case"FETCH_CITIES_FAILURE":return G({},e.citiesInput,{loading:!1,cities:[],error:t.payload});case"FETCH_CITY_SUCCESS":return G({},e.citiesInput,{city:t.payload});default:return e.citiesInput}};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach(function(t){Object(M.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var X=function(e,t){if(void 0===e)return{warehouses:[],loading:!1,error:!1,warehouse:{}};switch(t.type){case"FETCH_WAREHOUSES_REQUEST":return V({},e.warehouses,{loading:!0});case"FETCH_WAREHOUSES_SUCCESS":return V({},e.warehouses,{loading:!1,warehouses:t.payload.data});case"FETCH_WAREHOUSES_FAILURE":return V({},e.warehouses,{loading:!1,warehouses:[],error:t.payload});case"WAREHOUSE_CHOOSED":return V({},e.warehouses,{warehouse:t.payload});case"CLEAR_WAREHOUSE":return V({},e,{warehouse:{}});default:return e.warehouses}},Z=function(e,t){return{citiesInput:Y(e,t),warehouses:X(e,t)}},$=Object(J.b)(Z),ee=new function e(){var t=this;Object(h.a)(this,e),this.APIKey="c0ce9a8981a02dab73883469619c32a1",this.urlBase="https://api.novaposhta.ua/v2.0/json/",this.getResource=function(){var e=Object(K.a)(L.a.mark(function e(r){var n,a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(Q({},r,{apiKey:t.APIKey})),e.next=3,fetch(t.urlBase,{method:"POST",body:n,headers:{"content-type":"application/json"}});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Could not fetch, received ".concat(a.status));case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getDistricts=Object(K.a)(L.a.mark(function e(){var r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"Address",calledMethod:"getAreas"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e)})),this.getCities=Object(K.a)(L.a.mark(function e(){var r;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"Address",calledMethod:"getCities"});case 2:return r=e.sent,e.abrupt("return",r.data.map(function(e){return e.Description}));case 4:case"end":return e.stop()}},e)})),this.getCity=function(){var e=Object(K.a)(L.a.mark(function e(r){var n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"AddressGeneral",calledMethod:"getCities",methodProperties:{FindByString:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getWarehouses=function(){var e=Object(K.a)(L.a.mark(function e(r){var n;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource({modelName:"AddressGeneral",calledMethod:"getWarehouses",methodProperties:{Language:"ru",CityName:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};o.a.render(a.a.createElement(i.a,{store:$},a.a.createElement(F,null,a.a.createElement(g,{value:ee},a.a.createElement(s.a,null,a.a.createElement(D,null))))),document.getElementById("root"))},35:function(e,t,r){},37:function(e,t,r){e.exports=r.p+"static/media/logo.1cf18ac9.jpg"},40:function(e,t,r){e.exports=r(102)},49:function(e,t,r){},50:function(e,t,r){},95:function(e,t,r){},96:function(e,t,r){},97:function(e,t,r){},98:function(e,t,r){},99:function(e,t,r){}},[[40,1,2]]]);
//# sourceMappingURL=main.94048f38.chunk.js.map